<f3:inject id="content">
    <section class="max-w-md px-4 py-6 mx-auto bg-white dark:bg-gray-700" x-data="data">
        <h2 class="text-lg font-semibold text-gray-700 capitalize dark:text-gray-200">{{t('login.forgot_password')}}
        </h2>
        <div class="grid grid-cols-1 gap-2 mt-4">
            <ff:input x-model="data.email" autocomplete="off" required autofocus title="{{ t('register.email') }}" />
        </div>

        <div class="flex items-center justify-end mt-6">
            <ff:spinner x-show="submitting" x-cloak class="mx-2" />
            <button class="button" :disabled="Boolean(submitting)" @click="submit()">Submit</button>
        </div>
        <check if="{{@APP.registration}}">
            <div class="flex items-center justify-center py-4 mt-4 text-center bg-gray-100 dark:bg-gray-600">
                <span class="text-sm text-gray-600 dark:text-gray-300">{{ t('login.no_account') }}</span>
                <a href="{{@BASE}}/member/register"
                    class="mx-2 text-sm font-bold text-blue-600 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-400">{{
                    t('login.register') }}</a>
            </div>
        </check>
    </section>
</f3:inject>

<f3:inject id="script" mode="append">
    <script src="{{@BASE}}/js/fftable.min.js"></script>
    <script type="text/javascript">
        const data = {
            errors: {},
            submitting: false,
            data: {
                email: '',
            },
            submit() {
                this.submitting = true;
                fetchData('{{ @BASE }}/ajax/member/forgot-password', this.data).then(
                    resp => popupInfo(resp.join("<br>"), '', () => location.href = '{{@BASE}}/'),
                    error => popupError(error, '', () => location.href = '{{@BASE}}/')
                );
            }
        };

    </script>
</f3:inject>
<include href="blocks/popup.html" />
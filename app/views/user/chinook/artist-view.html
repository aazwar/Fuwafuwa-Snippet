<f3:inject id="content">
    <div class="max-w-screen-sm p-6 bg-white border border-gray-200 rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700"
        x-data="artist">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" class="size-10 mb-2 text-gray-500 dark:text-gray-400" aria-hidden="true"
            fill="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
            class="feather feather-user">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <h2 class="mb-2 text-2xl font-semibold tracking-tight text-gray-900 dark:text-white">Artist</h2>
        <div class="font-normal text-gray-500 dark:text-gray-400">
            <div class="grid md:grid-cols-2">
                <div class="mb-2 text-gray-700 dark:text-gray-200">
                    <div class="text-xs font-bold">Name</div>
                    <div x-html="record.ArtistName">name</div>
                </div>
                <div class="mb-2 text-gray-700 dark:text-gray-200">
                    <div class="text-xs font-bold">Albums</div>
                    <div x-text="record.Albums">albums</div>
                </div>

            </div>
        </div>
    </div>
    <div x-data="FFTable(album)">
        <include href="blocks/table.html" />
    </div>
</f3:inject>
<f3:inject id="script">
    <script src="{{@BASE}}/js/fftable.min.js"></script>
    <script type="text/javascript">
        const artist = {
            record: { Title: '', ArtistName: '' },
            init() {
                let id = '{{@ArtistId}}';
                if (id) {
                    fetchData('{{@BASE}}/ajax/chinook/artist/load', { ArtistId: id }).then(data => {
                        data.ArtistName = `<a href="{{@BASE}}/chinook/artist/${data.ArtistId}" class="underline">${data.Name}</a>`;
                        this.record = data
                    });
                }
            }
        }

        let album = {
            fields: [
                { title: 'AlbumId', name: 'AlbumId', visible: false },
                {
                    title: 'Album', name: 'Title', raw: true, formatter(v, c, d) {
                        return `<a href="{{@BASE}}/chinook/album/${d.AlbumId}" class="underline">${v}</a>`;
                    }
                },
            ],

            // table options
            table: {
                url: '{{@BASE}}/ajax/chinook/album/elist',
                editable: false,
                selection: 'single',
                pageSize: 20,
                sorting: 'multiple',
                size: 'small',
                limit: [{ col: 'al.ArtistId', op: '=', value: '{{@ArtistId}}' }],
            },

        }
    </script>
</f3:inject>
<include href="blocks/popup.html" />